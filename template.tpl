___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_MJWB6",
  "version": 1,
  "displayName": "Tracklution",
  "brand": {
    "id": "github.com_tracklution",
    "displayName": "tracklution",
    "thumbnail": "data:image/png;base64,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UmVhZHlxyWU8AAADJmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4xLWMwMDAgNzkuOWNjYzRkZTkzLCAyMDIyLzAzLzE0LTE0OjA3OjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjMuMyAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTMzM0FBOEQ0NzM1MTFFRUE2RkJGNUUyMTEwNUMzQTMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTMzM0FBOEU0NzM1MTFFRUE2RkJGNUUyMTEwNUMzQTMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1MzMzQUE4QjQ3MzUxMUVFQTZGQkY1RTIxMTA1QzNBMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MzMzQUE4QzQ3MzUxMUVFQTZGQkY1RTIxMTA1QzNBMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsdmhtAAAB+iSURBVHja7F0JmFxVsa5epmfPTCYLCRCSEAwhgChh0YiAIkEWZUdkEXgIBkFQnjzBAMIDRbaAiCggWzAssgVEluQRg+xk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"
  },
  "description": "Simple server-side tracking, finally. This official Tracklution template lets you install and manage Tracklution tags across your website.",
  "categories": [
    "TAG_MANAGEMENT",
    "ADVERTISING",
    "ANALYTICS"
  ],
  "containerContexts": [
    "WEB"
  ],
  "securityGroups": []
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "pixelId",
    "displayName": "Tracklution ID",
    "simpleValueType": true,
    "help": "Enter the Tracking Container ID you can find in the installation instructions of your Tracklution container.",
    "valueValidators": [
      {
        "type": "REGEX",
        "args": [
          "^LS-\\d+-\\d$"
        ],
        "errorMessage": "Please provide the Tracking Container ID in the correct format (\u003cstrong\u003eLS-12345678-9\u003c/strong\u003e)."
      },
      {
        "type": "NON_EMPTY"
      }
    ],
    "valueHint": "LS-12345678-9"
  },
  {
    "type": "TEXT",
    "name": "tracklutionHost",
    "displayName": "Tracklution Domain",
    "simpleValueType": true,
    "valueHint": "main-1234.yourshop.com",
  },
  {
    "type": "SELECT",
    "name": "event",
    "displayName": "Event Name",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "PageView",
        "displayValue": "PageView"
      },
      {
        "value": "ViewContent",
        "displayValue": "ViewContent"
      },
      {
        "value": "AddToCart",
        "displayValue": "AddToCart"
      },
      {
        "value": "CompleteRegistration",
        "displayValue": "CompleteRegistration"
      },
      {
        "value": "StartTrial",
        "displayValue": "StartTrial"
      },
      {
        "value": "Subscribe",
        "displayValue": "Subscribe"
      },
      {
        "value": "InitiateCheckout",
        "displayValue": "InitiateCheckout"
      },
      {
        "value": "Lead",
        "displayValue": "Lead"
      },
      {
        "value": "Purchase",
        "displayValue": "Purchase"
      },
      {
        "value": "ContactInfo",
        "displayValue": "ContactInfo"
      },
      {
        "value": "custom",
        "displayValue": "Custom..."
      }
    ],
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "customEventName",
    "displayName": "Custom Event Name",
    "simpleValueType": true,
    "valueHint": "YourCustomEventName",
    "help": "Enter the event name you want to send.",
    "valueValidators": [
      { "type": "NON_EMPTY" },
      { "type": "REGEX", "args": ["^(?!\\s+$).+"], "errorMessage": "Please enter a non-empty name." }
    ],
   "enablingConditions": [
      { "paramName": "event", "paramValue": "custom", "type": "EQUALS" }
    ]
  },
  {
    "type": "TEXT",
    "name": "eventValue",
    "displayName": "Event Value",
    "simpleValueType": true,
    "valueHint": "123.45",
    "help": "Optional. Non-negative decimal using a dot as the decimal separator (e.g., 123.45).",
    "valueValidators": [
      {
        "type": "REGEX",
        "args": ["^$|^\\d+(\\.\\d+)?$"],
        "errorMessage": "Use a non-negative decimal like 123 or 123.45 (dot as decimal separator)."
      }
    ],
    "enablingConditions": [
      { "paramName": "event", "type": "EQUALS", "paramValue": "ViewContent" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "AddToCart" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "CompleteRegistration" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "StartTrial" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "Subscribe" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "InitiateCheckout" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "Lead" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "Purchase" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "custom" }
    ]
  },
  {
    "type": "TEXT",
    "name": "eventCurrency",
    "displayName": "Event Currency",
    "simpleValueType": true,
    "valueHint": "EUR",
    "help": "Optional. ISO 4217 currency code (e.g., EUR). Lowercase is accepted.",
    "valueValidators": [
      {
        "type": "REGEX",
        "args": ["^$|^[A-Za-z]{3}$"],
        "errorMessage": "Use a 3-letter currency code like EUR or usd."
      }
    ],
    "enablingConditions": [
      { "paramName": "event", "type": "EQUALS", "paramValue": "ViewContent" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "AddToCart" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "CompleteRegistration" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "StartTrial" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "Subscribe" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "InitiateCheckout" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "Lead" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "Purchase" },
      { "paramName": "event", "type": "EQUALS", "paramValue": "custom" }
    ]
  },
  {
    "type": "GROUP",
    "name": "custom",
    "displayName": "Custom Parameters",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "customParams",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Key",
            "name": "key",
            "type": "TEXT",
            "isUnique": true
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "newRowButtonText": "Add Parameter"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "event",
        "paramValue": "ContactInfo",
        "type": "NOT_EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "ecom",
    "displayName": "Ecommerce Parameters",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "sendEcommerce",
        "checkboxText": "Send Ecommerce Data",
        "simpleValueType": true,
        "defaultValue": false
      },
      {
        "type": "CHECKBOX",
        "name": "isPartial",
        "checkboxText": "Partial Purchase",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "Check this box if the purchase is a partial or a virtual purchase. Note, if \"Send Ecommerce Data\" is unchecked, checking this box will do nothing. \u003ca href\u003d\"https://docs.tracklution.com/tracking-events/tracking-events#partial-purchases-or-virtual-purchases\"\u003eRead more here\u003c/a\u003e.",
        "enablingConditions": [
          {
            "paramName": "event",
            "paramValue": "Purchase",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "RADIO",
        "name": "dataSource",
        "displayName": "Data Source",
        "radioItems": [
          {
            "value": "dataLayer",
            "displayValue": "GA4 Data Layer",
            "help": "\u003ca href\u003d\"https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type\u003dgtm#make_a_purchase_or_issue_a_refund\"\u003eRead this\u003c/a\u003e for instructions on how to build the GA4 Ecommerce Data Layer."
          },
          {
            "value": "variable",
            "displayValue": "Variable",
            "subParams": [
              {
                "type": "SELECT",
                "name": "ecomVariable",
                "displayName": "",
                "macrosInSelect": true,
                "selectItems": [],
                "simpleValueType": true
              }
            ],
            "help": "The variable needs to return an object that would be contained within the \u003cstrong\u003eecommerce\u003c/strong\u003e object in a GA4 Ecommerce Data Layer. \u003ca href\u003d\"https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type\u003dgtm#make_a_purchase_or_issue_a_refund\"\u003eRead this\u003c/a\u003e to see an example of the GA4 Ecommerce Data Layer."
          },
          {
            "value": "manual",
            "displayValue": "Manual",
            "subParams": [
              {
                "type": "TEXT",
                "name": "transactionId",
                "displayName": "Transaction ID",
                "simpleValueType": true
              },
              {
                "type": "TEXT",
                "name": "value",
                "displayName": "Order Value",
                "simpleValueType": true
              },
              {
                "type": "TEXT",
                "name": "coupon",
                "displayName": "Coupon",
                "simpleValueType": true
              },
              {
                "type": "TEXT",
                "name": "currency",
                "displayName": "Currency",
                "simpleValueType": true
              },
              {
                "type": "TEXT",
                "name": "paymentType",
                "displayName": "Payment Type",
                "simpleValueType": true
              },
              {
                "type": "TEXT",
                "name": "shippingTier",
                "displayName": "Shipping Tier",
                "simpleValueType": true
              },
              {
                "type": "TEXT",
                "name": "tax",
                "displayName": "Tax Amount",
                "simpleValueType": true
              },
              {
                "type": "TEXT",
                "name": "shipping",
                "displayName": "Shipping Cost",
                "simpleValueType": true
              },
              {
                "type": "SELECT",
                "name": "items",
                "displayName": "Items",
                "macrosInSelect": true,
                "selectItems": [],
                "simpleValueType": true,
                "help": "Select a variable that returns an array of item objects following the \u003ca href\u003d\"https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type\u003dgtag#implementation\"\u003eGA4 schema for items\u003c/a\u003e.",
                "notSetText": "Not set"
              }
            ]
          }
        ],
        "simpleValueType": true,
        "help": "Select \u003cstrong\u003eGA4 Data Layer\u003c/strong\u003e if you want the tag to look through the \u003ccode\u003edataLayer\u003c/code\u003e for the most recent e-commerce object push in the \u003ca href\u003d\"https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type\u003dgtm#implementation\"\u003eGA4 schema format\u003c/a\u003e and automatically use those keys and values to decorate the outgoing Tracklution hit. Select \u003cstrong\u003eVariable\u003c/strong\u003e if you want to provide the e-commerce object yourself – you need to use a Google Tag Manager variable that returns an object in the \u003ca href\u003d\"https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type\u003dgtm#implementation\"\u003eGA4 schema format\u003c/a\u003e. Select \u003cstrong\u003eManual\u003c/strong\u003e if you want to populate the e-commerce fields in this tag manually.",
        "enablingConditions": [
          {
            "paramName": "sendEcommerce",
            "paramValue": true,
            "type": "EQUALS"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "event",
        "paramValue": "ContactInfo",
        "type": "NOT_EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "contact",
    "displayName": "Contact Info",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "LABEL",
        "name": "contactInfo",
        "displayName": "You can populate the fields below with additional information about your users. If you leave a field blank or if you choose a variable that returns an \u003ccode\u003eundefined\u003c/code\u003e or \u003ccode\u003enull\u003c/code\u003e value, the parameter will be omitted from the outgoing hit to Tracklution. You can send the values in \u003cstrong\u003eplain text\u003c/strong\u003e or \u003cstrong\u003ehashed\u003c/strong\u003e format. If you send them in plain text, then remember that \u003cstrong\u003eTracklution automatically hashes the values before they are sent to any Connectors\u003c/strong\u003e, but they will be sent unhashed to Tracklution. \u003ca href\u003d\"https://docs.tracklution.com/tracking-events/tracking-events#contactinfo-event-1\"\u003eRead more here\u003c/a\u003e.\u003cbr/\u003e\u003cbr/\u003e"
      },
      {
        "type": "TEXT",
        "name": "email",
        "displayName": "Email Address",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "phoneNumber",
        "displayName": "Phone Number",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "firstName",
        "displayName": "First Name",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "lastName",
        "displayName": "Last Name",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "birthday",
        "displayName": "Birthday",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "gender",
        "displayName": "Gender",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "address",
        "displayName": "Address",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "postCode",
        "displayName": "Post Code",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "city",
        "displayName": "City",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "country",
        "displayName": "Country",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "externalId",
        "displayName": "External ID",
        "simpleValueType": true
      }
    ],
    "enablingConditions": [
      {
        "paramName": "event",
        "paramValue": "ContactInfo",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "advanced",
    "displayName": "Additional Configuration",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "RADIO",
        "name": "customHost",
        "displayName": "Customize CDN",
        "radioItems": [
          {
            "value": "default",
            "displayValue": "Use default (gtm.trlution.com)",
            "help": "Keep this checked to load the Tracklution JavaScript from its default host, \u003cstrong\u003egtm.trlution.com\u003c/strong\u003e."
          },
          {
            "value": "firstParty",
            "displayValue": "First-party Host",
            "help": "If you\u0027ve enabled first-party hosting for the Tracklution JavaScript, you can check this button. You \u003cstrong\u003emust\u003c/strong\u003e load the Tracklution JavaScript separately using a Custom HTML tag or similar technology \u003cstrong\u003ebefore\u003c/strong\u003e any tags built with this template fire. By checking this button, this template will not load any JavaScript libraries from Tracklution\u0027s CDN."
          }
        ],
        "simpleValueType": true,
        "defaultValue": "default"
      },
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const aliasInWindow = require('aliasInWindow');
const callInWindow = require('callInWindow');
const copyFromDataLayer = require('copyFromDataLayer');
const copyFromWindow = require('copyFromWindow');
const createQueue = require('createQueue');
const getType = require('getType');
const injectScript = require('injectScript');
const logToConsole = require('logToConsole');
const makeTableMap = require('makeTableMap');
const setInWindow = require('setInWindow');

const VERSION = '2025-09-10';
const INIT_IDS = copyFromWindow('_tlq_gtm_ids') || [];

/**
 * Constructs the URL to the Tracklution CDN script.
 * @type {string}
 */
const CDN_URL = 'https://gtm.trlution.com/js/script-dynamic.js?d=' + (data.tracklutionHost || 'gtm.trlution.com') + '&version=' + VERSION;

/**
 * Logs a message to the console with the Tracklution prefix.
 * @param {string} msg - The message to log.
 */
const LOG = msg => {
  logToConsole('[Tracklution] ' + msg);
};

/**
 * Merges two objects together, with properties from source overwriting target.
 * @param {Object} target
 * @param {Object} source
 * @returns {Object} Merged object
 */
const mergeObj = (target, source) => {
  for (let key in source) {
    if (source.hasOwnProperty(key)) {
      target[key] = source[key];
    }
  }
  return target;
};

/**
 * Retrieves ecommerce parameters from a specified data source.
 * @returns {Object} Ecommerce parameters
 */
const getEcomParams = () => {
  let ecomParams = {};

  switch (data.dataSource) {
    case 'variable':
      ecomParams = getType(data.ecomVariable) === 'object' ? data.ecomVariable : {};
      break;
    case 'dataLayer':
      ecomParams = copyFromDataLayer('ecommerce', 1) || {};
      break;
    case 'manual':
      ecomParams = {
        transaction_id: data.transactionId,
        value: data.value,
        coupon: data.coupon,
        currency: data.currency,
        payment_type: data.paymentType,
        shipping_tier: data.shippingTier,
        shipping: data.shipping,
        tax: data.tax,
        items: getType(data.items) === 'array' ? data.items : undefined
      };
      break;
  }

  if (data.isPartial) {
    ecomParams.isPartial = true;
  }

  return ecomParams;
};

/**
 * Optional event-level value/currency (when Event ≠ PageView and ≠ ContactInfo).
 * These are included if set, but ecommerce/manual can overwrite them.
 */
const baseEventParams = {};
if (data.event !== 'PageView' && data.event !== 'ContactInfo') {
  // Value: from string to Number, non-negative (regex validator already ensures format)
  if (getType(data.eventValue) === 'string' && data.eventValue.trim() !== '') {
    var parsedValue = data.eventValue.trim() * 1;
    if (parsedValue >= 0) {
      baseEventParams.value = parsedValue;
    }
  }
  // Currency: normalize to uppercase 3-letter code
  if (getType(data.eventCurrency) === 'string' && data.eventCurrency.trim() !== '') {
    baseEventParams.currency = data.eventCurrency.trim().toUpperCase();
  }
}

/**
 * Merged parameters from (1) optional event value/currency, (2) ecommerce/manual,
 * and (3) custom params table. Later merges overwrite earlier keys.
 * This ensures ecommerce/manual can overwrite value/currency when present.
 */
const params = mergeObj(
  mergeObj(baseEventParams, getEcomParams()),
  makeTableMap(data.customParams || [], 'key', 'value')
);

/**
 * Retrieves or initializes the global `tlq` function.
 * @returns {Function} The `tlq` function
 */
const getTlq = () => {
  let tlq = copyFromWindow('tlq');
  if (tlq) return tlq;

  // Initialize the 'tlq' global method to either use
  // tlq.callMethod or tlq.queue
  setInWindow('tlq', function() {
    const callMethod = copyFromWindow('tlq.callMethod');
    if (callMethod) {
      callInWindow('tlq.callMethod', arguments);
    } else {
      callInWindow('tlq.queue.push', arguments);
    }
  });

  aliasInWindow('_tlq', 'tlq');
  createQueue('tlq.queue');

  return copyFromWindow('tlq');
};

const tlq = getTlq();

/**
 * Sends the event or contact info to the `tlq` function.
 */
if (data.event !== 'ContactInfo') {
  var resolvedEventName = data.event === 'custom' ? (data.customEventName || '') : data.event;

  // Safety guard — template validation should already enforce NON_EMPTY,
  // but we fail early if somehow empty.
  if (!resolvedEventName || ('' + resolvedEventName).trim() === '') {
    LOG('Custom event name is required when "Custom..." is selected.');
    data.gtmOnFailure();
    return;
  }

  tlq('track', resolvedEventName, params);
} else {
  const contactObj = {};

  const fields = [
    'email', 'phoneNumber', 'firstName', 'lastName', 'birthday', 'gender',
    'address', 'postCode', 'city', 'country', 'externalId'
  ];

  fields.forEach(field => {
    if (data[field]) {
      contactObj[field] = data[field];
    }
  });

  tlq('set', 'ContactInfo', contactObj);
}

/**
 * Initializes the pixel ID if it hasn't already been initialized.
 */
if (INIT_IDS.indexOf(data.pixelId) === -1) {
  tlq('init', data.pixelId);
  INIT_IDS.push(data.pixelId);
  setInWindow('_tlq_gtm_ids', INIT_IDS, true);
}

/**
 * Injects the Tracklution script unless using first-party host.
 */
if (data.customHost !== 'firstParty') {
  if (data.tracklutionHost) {
    setInWindow('tlq.src', CDN_URL, true);
  }
  injectScript(
    CDN_URL,
    data.gtmOnSuccess,
    data.gtmOnFailure,
    'tlqPixel'
  );
} else {
  data.gtmOnSuccess();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_tlq_gtm_ids"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "tlq"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_tlq"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "tlq.src"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "tlq.callMethod"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "tlq.queue"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "tlq.queue.push"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.trlution.com/js/script-dynamic.js*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedKeys",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "ecommerce"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 23/04/2025, 09:41:32


